<!DOCTYPE html>
<html>
<head>
  <title>Edit Milk Entry</title>
</head>
<body>
  <h2>‚úèÔ∏è Edit Milk Entry</h2>

  <form id="editForm">
    <label>Date:</label>
    <input type="date" id="date" required><br><br>

    <label>Customer Name:</label>
    <input type="text" id="name" required><br><br>

    <label>Milk (Litres):</label>
    <input type="number" id="milk" required><br><br>

    <label>Fat (%):</label>
    <input type="number" id="fat" required><br><br>

    <label>Rate (‚Çπ per fat):</label>
    <input type="number" id="rate" required><br><br>

    <button type="submit">üíæ Update Entry</button>
  </form>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const index = urlParams.get('index');
    const data = JSON.parse(localStorage.getItem("milkEntries")) || [];

    const entry = data[index];

    // Pre-fill form
    document.getElementById("date").value = entry.date;
    document.getElementById("name").value = entry.name;
    document.getElementById("milk").value = entry.milk;
    document.getElementById("fat").value = entry.fat;
    document.getElementById("rate").value = entry.rate;

    document.getElementById("editForm").addEventListener("submit", function(e) {
      e.preventDefault();

      // Update entry
      data[index] = {
        date: document.getElementById("date").value,
        name: document.getElementById("name").value,
        milk: parseFloat(document.getElementById("milk").value),
        fat: parseFloat(document.getElementById("fat").value),
        rate: parseFloat(document.getElementById("rate").value),
        total: ((parseFloat(document.getElementById("milk").value) * parseFloat(document.getElementById("fat").value) * parseFloat(document.getElementById("rate").value)) / 10).toFixed(2)
      };

      localStorage.setItem("milkEntries", JSON.stringify(data));
      alert("‚úÖ Entry updated!");
      window.location.href = "index.html";
    });
  </script>
</body>
</html>
